{"remainingRequest":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\src\\components\\SnakeGame.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\src\\components\\SnakeGame.vue","mtime":1621920187403},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTbmFrZUdhbWUiLAogIC8vcG96aXRpYSBjdXJlbnRhIHNhcnBlCiAgc25ha2VQb3NpdGlvbjogW10sCiAgLy9wb3ppdGlhIGN1cmVudGEgbWFuY2FyZQogIGZvb2RQb3NpdGlvbjoge30sCiAgLy9wb3ppdGlhIHRyZWN1dGEgc2FycGUKICBwYXN0U25ha2VQb3NpdGlvbjogW10sCiAgLy9wb3ppdGlhIHRyZWN1dGEgbWFuY2FyZQogIHBhc3RGb29kUG9zaXRpb246IHt9LAogIC8vZGlyZWN0aW9uIHBvYXRlIGZpOiAncicsJ2wnLCd1JywnZCcKICBkaXJlY3Rpb246ICJyIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc29ja2V0OiB7fSwKICAgICAgY29udGV4dDoge30sCiAgICAgIHNjb3JlOiAwLAogICAgfTsKICB9LAoKICAvL0NvbmV4aXVuZWEKICBjcmVhdGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBpbygiaHR0cDovL2xvY2FsaG9zdDozMDAwIik7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY29udGV4dCA9IHRoaXMuJHJlZnMuZ2FtZS5nZXRDb250ZXh0KCIyZCIpOwogICAgLy9EZXNlbmFyZWEgc2FycGVsdWkKICAgIHRoaXMuc29ja2V0Lm9uKCJzbmFrZVBvc2l0aW9uIiwgKGRhdGEpID0+IHsKICAgICAgdGhpcy5zbmFrZVBvc2l0aW9uID0gZGF0YTsKICAgICAgdGhpcy5wYWludFNuYWtlKCk7CiAgICB9KTsKCiAgICAvL0Rlc2VuYXJlYSBtYW5jYXJpaQogICAgdGhpcy5zb2NrZXQub24oImZvb2RQb3NpdGlvbiIsIChkYXRhKSA9PiB7CiAgICAgIHRoaXMuZm9vZFBvc2l0aW9uID0gZGF0YTsKICAgICAgdGhpcy5wYWludEZvb2QodGhpcy5mb29kUG9zaXRpb24pOwogICAgICB0aGlzLnBhc3RGb29kUG9zaXRpb24gPSBkYXRhOwogICAgfSk7CgogICAgLy9TZmFyc2l0IGpvYzogQWZpc2VhemEgdW4gbWVzYWogc2kgc2NvcnVsICsgcmVpbmNhcmNhIHBhZ2luYQogICAgdGhpcy5zb2NrZXQub24oImxvc2UiLCAoKSA9PiB7CiAgICAgIGFsZXJ0KCJZb3UgbG9zZSEgWW91ciBmaW5hbCBzY29yZSBpczogIiArIHRoaXMuc2NvcmUpOwogICAgICB3aW5kb3cubG9jYXRpb24gPSBsb2NhdGlvbjsKICAgIH0pOwoKICAgIC8vVXBkYXRlYXphIHNjb3IKICAgIHRoaXMuc29ja2V0Lm9uKCJ1cGRhdGVTY29yZSIsICgpID0+IHsKICAgICAgdGhpcy5zY29yZSArPSAxMDsKICAgIH0pOwoKICAgIC8vRXZlbnQgbGlzdGVuZXIgcHQgdGFzdGEgYXBhc2F0YQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCAoZSkgPT4gewogICAgICAKICAgICAgc3dpdGNoIChlLmtleSkgewogICAgICAgIGNhc2UgIkFycm93VXAiOgogICAgICAgICAgY29uc29sZS5sb2coZS5rZXkpOwogICAgICAgICAgLy9EYWNhIHNhcnBlbGUgc2UgZGVwbGFzZWF6YSBpbiBqb3MsIG51IHBvdCBkYSBjb21hbmRhIHN1cwogICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9ICJkIikgewogICAgICAgICAgICB0aGlzLmdvVXAoKTsKICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAidSI7CiAgICAgICAgICB9YnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93RG93biI6CiAgICAgICAgICBjb25zb2xlLmxvZyhlLmtleSk7CiAgICAgICAgICAvL0RhY2Egc2FycGVsZSBzZSBkZXBsYXNlYXphIGluIHN1cywgbnUgcG90IGRhIGNvbWFuZGEgZGUgam9zCiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gInUiKSB7CiAgICAgICAgICAgIHRoaXMuZ29Eb3dtKCk7CiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gImQiOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS54LCB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLnkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93TGVmdCI6CiAgICAgICAgICBjb25zb2xlLmxvZyhlLmtleSk7CiAgICAgICAgICAvL0RhY2Egc2FycGVsZSBzZSBkZXBsYXNlYXphIHNwcmUgZHJlYXB0YSwgbnUgcG90IGRhIGNvbWFuZGEgZGUgc3RhbmdhCiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gInIiKSB7CiAgICAgICAgICAgIHRoaXMuZ29MZWZ0KCk7CiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gImwiOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS54LCB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLnkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93UmlnaHQiOgogICAgICAgICAgY29uc29sZS5sb2coZS5rZXkpOwogICAgICAgICAgLy9EYWNhIHNhcnBlbGUgc2UgZGVwbGFzZWF6YSBzcHJlIHN0YW5nYSBudSBwb3QgZGEgY29tYW5kYSBkZSBkcmVhcHRhCiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gImwiKSB7CiAgICAgICAgICAgIHRoaXMuZ29SaWdodCgpOwogICAgICAgICAgICB0aGlzLmRpcmVjdGlvbiA9ICJyIjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucGFzdFNuYWtlUG9zaXRpb25bMF0ueCwgdGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS55KTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvL01ldG9kYSBkZSBkZXNlbmFyZSBzYXJwZQogICAgcGFpbnRTbmFrZSgpIHsKICAgICAgLy9EYWNhIHBveml0aWlsZSB0cmVjdXRlIG51IHN1bnQgbnVsZSwgbGUgc3RlcmcKICAgICAgaWYgKHRoaXMucGFzdFNuYWtlUG9zaXRpb24gIT0gbnVsbCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXN0U25ha2VQb3NpdGlvbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgKICAgICAgICAgICAgdGhpcy5wYXN0U25ha2VQb3NpdGlvbltpXS54LAogICAgICAgICAgICB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uW2ldLnksCiAgICAgICAgICAgIDIwLAogICAgICAgICAgICAyMAogICAgICAgICAgKTsKICAgICAgICAgIGlmIChpIDwgdGhpcy5zbmFrZVBvc2l0aW9uLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgdGhpcy5zbmFrZVBvc2l0aW9uW2kgKyAxXSA9IHRoaXMucGFzdFNuYWtlUG9zaXRpb25baV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIC8vRGVzZW5leiBwb3ppdGlpbGUgYWN0dWFsZSBhbGUgc2FycGVsdWkKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJibGFjazsiOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuc25ha2VQb3NpdGlvbi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdCgKICAgICAgICAgIHRoaXMuc25ha2VQb3NpdGlvbltqXS54LAogICAgICAgICAgdGhpcy5zbmFrZVBvc2l0aW9uW2pdLnksCiAgICAgICAgICAyMCwKICAgICAgICAgIDIwCiAgICAgICAgKTsKICAgICAgfQogICAgICB0aGlzLnZlcmlmeSgpOwogICAgICB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uID0gdGhpcy5zbmFrZVBvc2l0aW9uOwogICAgfSwKCiAgICAvL01ldG9kYSBkZSBkZXNlbmF0IG1hbmNhcmVhCiAgICBwYWludEZvb2QocG9zaXRpb24pIHsKICAgICAgLy9EYWNhIHBveml0aWEgdHJlY3V0YSBhIG1hbmNhcmlpIG51IGVzdGUgbnVsbCwgbyBzdGVyZwogICAgICBpZiAodGhpcy5wYXN0Rm9vZFBvc2l0aW9uICE9IG51bGwpIHsKICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KAogICAgICAgICAgdGhpcy5wYXN0Rm9vZFBvc2l0aW9uLngsCiAgICAgICAgICB0aGlzLnBhc3RGb29kUG9zaXRpb24ueSwKICAgICAgICAgIDIwLAogICAgICAgICAgMjAKICAgICAgICApOwogICAgICB9CiAgICAgIC8vRGVzZW5leiBwb3ppdGlhIGFjdHVhbGEgYSBtYW5jYXJpaQogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gInJlZCI7CiAgICAgIHRoaXMuY29udGV4dC5maWxsUmVjdChwb3NpdGlvbi54LCBwb3NpdGlvbi55LCAyMCwgMjApOwogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrIjsKICAgIH0sCgogICAgLy9JbiBmdW5jdGllIGRlIHRhc3RhIGFwYXNhdGEgc2UgYXBlbGVhemEgdW5hIGRpbiBtZXRvZGVsZQogICAgLy9kZSBtYWkgam9zIGNhcmUgZW1pdCB1biBtZXNhaiBjb3Jlc3B1bnphdG9yIGNhdHJlIHNlcnZlcgogICAgZ29SaWdodCgpIHsKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJibGFjayI7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImdvUmlnaHQiKTsKICAgIH0sCgogICAgZ29MZWZ0KCkgewogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrIjsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiZ29MZWZ0Iik7CiAgICB9LAoKICAgIGdvVXAoKSB7CiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAiYmxhY2siOwogICAgICB0aGlzLnNvY2tldC5lbWl0KCJnb1VwIik7CiAgICB9LAoKICAgIGdvRG93bSgpIHsKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJibGFjayI7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImdvRG93biIpOwogICAgfSwKCiAgICAvL01ldG9kYSB2ZXJpZmljYSBkYWNhIHNhcnBlbGUgbnUgcy1hIG11c2NhdCBwZSBlbAogICAgLy9EYWNhIHMtYSBtdXNjYXQgYWZpc2VhemEgdW4gbWVzYWogc2kgc2NvcnVsCiAgICB2ZXJpZnkoKXsKICAgICAgZm9yICh2YXIgaTIgPSAxOyBpMiA8IHRoaXMuc25ha2VQb3NpdGlvbi5sZW5ndGg7IGkyKyspIHsKICAgICAgICBpZiAoICh0aGlzLnNuYWtlUG9zaXRpb25bMF0ueCA9PSB0aGlzLnNuYWtlUG9zaXRpb25baTJdLngpICYmICh0aGlzLnNuYWtlUG9zaXRpb25bMF0ueSA9PSB0aGlzLnNuYWtlUG9zaXRpb25baTJdLnkpKSB7CiAgICAgICAgICBhbGVydCgiWW91IGxvc2UhIFlvdXIgZmluYWwgc2NvcmUgaXM6ICIgKyB0aGlzLnNjb3JlKTsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9IGxvY2F0aW9uOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["SnakeGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SnakeGame.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"snake\">\n    <h1>Snake Game</h1>\n    <h2>Score: {{ score }}</h2>\n    <canvas\n      ref=\"game\"\n      class=\"board\"\n      width=\"640\"\n      height=\"480\"\n      style=\"border: 1px solid black\"\n    >\n    </canvas>\n  </div>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nexport default {\n  name: \"SnakeGame\",\n  //pozitia curenta sarpe\n  snakePosition: [],\n  //pozitia curenta mancare\n  foodPosition: {},\n  //pozitia trecuta sarpe\n  pastSnakePosition: [],\n  //pozitia trecuta mancare\n  pastFoodPosition: {},\n  //direction poate fi: 'r','l','u','d'\n  direction: \"r\",\n  data() {\n    return {\n      socket: {},\n      context: {},\n      score: 0,\n    };\n  },\n\n  //Conexiunea\n  created() {\n    this.socket = io(\"http://localhost:3000\");\n  },\n\n  mounted() {\n    this.context = this.$refs.game.getContext(\"2d\");\n    //Desenarea sarpelui\n    this.socket.on(\"snakePosition\", (data) => {\n      this.snakePosition = data;\n      this.paintSnake();\n    });\n\n    //Desenarea mancarii\n    this.socket.on(\"foodPosition\", (data) => {\n      this.foodPosition = data;\n      this.paintFood(this.foodPosition);\n      this.pastFoodPosition = data;\n    });\n\n    //Sfarsit joc: Afiseaza un mesaj si scorul + reincarca pagina\n    this.socket.on(\"lose\", () => {\n      alert(\"You lose! Your final score is: \" + this.score);\n      window.location = location;\n    });\n\n    //Updateaza scor\n    this.socket.on(\"updateScore\", () => {\n      this.score += 10;\n    });\n\n    //Event listener pt tasta apasata\n    window.addEventListener(\"keydown\", (e) => {\n      \n      switch (e.key) {\n        case \"ArrowUp\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza in jos, nu pot da comanda sus\n          if (this.direction != \"d\") {\n            this.goUp();\n            this.direction = \"u\";\n          }break;\n\n        case \"ArrowDown\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza in sus, nu pot da comanda de jos\n          if (this.direction != \"u\") {\n            this.goDowm();\n            this.direction = \"d\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowLeft\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza spre dreapta, nu pot da comanda de stanga\n          if (this.direction != \"r\") {\n            this.goLeft();\n            this.direction = \"l\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowRight\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza spre stanga nu pot da comanda de dreapta\n          if (this.direction != \"l\") {\n            this.goRight();\n            this.direction = \"r\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n      }\n    });\n  },\n\n  methods: {\n    //Metoda de desenare sarpe\n    paintSnake() {\n      //Daca pozitiile trecute nu sunt nule, le sterg\n      if (this.pastSnakePosition != null) {\n        for (var i = 0; i < this.pastSnakePosition.length; i++) {\n          this.context.clearRect(\n            this.pastSnakePosition[i].x,\n            this.pastSnakePosition[i].y,\n            20,\n            20\n          );\n          if (i < this.snakePosition.length - 1) {\n            this.snakePosition[i + 1] = this.pastSnakePosition[i];\n          }\n        }\n      }\n      //Desenez pozitiile actuale ale sarpelui\n      this.context.fillStyle = \"black;\";\n      for (var j = 0; j < this.snakePosition.length; j++) {\n        this.context.fillRect(\n          this.snakePosition[j].x,\n          this.snakePosition[j].y,\n          20,\n          20\n        );\n      }\n      this.verify();\n      this.pastSnakePosition = this.snakePosition;\n    },\n\n    //Metoda de desenat mancarea\n    paintFood(position) {\n      //Daca pozitia trecuta a mancarii nu este null, o sterg\n      if (this.pastFoodPosition != null) {\n        this.context.clearRect(\n          this.pastFoodPosition.x,\n          this.pastFoodPosition.y,\n          20,\n          20\n        );\n      }\n      //Desenez pozitia actuala a mancarii\n      this.context.fillStyle = \"red\";\n      this.context.fillRect(position.x, position.y, 20, 20);\n      this.context.fillStyle = \"black\";\n    },\n\n    //In functie de tasta apasata se apeleaza una din metodele\n    //de mai jos care emit un mesaj corespunzator catre server\n    goRight() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goRight\");\n    },\n\n    goLeft() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goLeft\");\n    },\n\n    goUp() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goUp\");\n    },\n\n    goDowm() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goDown\");\n    },\n\n    //Metoda verifica daca sarpele nu s-a muscat pe el\n    //Daca s-a muscat afiseaza un mesaj si scorul\n    verify(){\n      for (var i2 = 1; i2 < this.snakePosition.length; i2++) {\n        if ( (this.snakePosition[0].x == this.snakePosition[i2].x) && (this.snakePosition[0].y == this.snakePosition[i2].y)) {\n          alert(\"You lose! Your final score is: \" + this.score);\n          window.location = location;\n        }\n      }\n    }\n  },\n};\n</script>\n\n<style scoped>\n/* Centrarea elementelor */\n.snake {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.board {\n  margin-top: 100px;\n}\n</style>\n"]}]}