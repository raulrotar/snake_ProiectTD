{"remainingRequest":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\src\\components\\SnakeGame.vue?vue&type=style&index=0&id=33a5af5c&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\src\\components\\SnakeGame.vue","mtime":1621920187403},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Raul\\Desktop\\Snake_finalV2\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLyogQ2VudHJhcmVhIGVsZW1lbnRlbG9yICovCi5zbmFrZSB7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouYm9hcmQgewogIG1hcmdpbi10b3A6IDEwMHB4Owp9Cg=="},{"version":3,"sources":["SnakeGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"SnakeGame.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"snake\">\n    <h1>Snake Game</h1>\n    <h2>Score: {{ score }}</h2>\n    <canvas\n      ref=\"game\"\n      class=\"board\"\n      width=\"640\"\n      height=\"480\"\n      style=\"border: 1px solid black\"\n    >\n    </canvas>\n  </div>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nexport default {\n  name: \"SnakeGame\",\n  //pozitia curenta sarpe\n  snakePosition: [],\n  //pozitia curenta mancare\n  foodPosition: {},\n  //pozitia trecuta sarpe\n  pastSnakePosition: [],\n  //pozitia trecuta mancare\n  pastFoodPosition: {},\n  //direction poate fi: 'r','l','u','d'\n  direction: \"r\",\n  data() {\n    return {\n      socket: {},\n      context: {},\n      score: 0,\n    };\n  },\n\n  //Conexiunea\n  created() {\n    this.socket = io(\"http://localhost:3000\");\n  },\n\n  mounted() {\n    this.context = this.$refs.game.getContext(\"2d\");\n    //Desenarea sarpelui\n    this.socket.on(\"snakePosition\", (data) => {\n      this.snakePosition = data;\n      this.paintSnake();\n    });\n\n    //Desenarea mancarii\n    this.socket.on(\"foodPosition\", (data) => {\n      this.foodPosition = data;\n      this.paintFood(this.foodPosition);\n      this.pastFoodPosition = data;\n    });\n\n    //Sfarsit joc: Afiseaza un mesaj si scorul + reincarca pagina\n    this.socket.on(\"lose\", () => {\n      alert(\"You lose! Your final score is: \" + this.score);\n      window.location = location;\n    });\n\n    //Updateaza scor\n    this.socket.on(\"updateScore\", () => {\n      this.score += 10;\n    });\n\n    //Event listener pt tasta apasata\n    window.addEventListener(\"keydown\", (e) => {\n      \n      switch (e.key) {\n        case \"ArrowUp\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza in jos, nu pot da comanda sus\n          if (this.direction != \"d\") {\n            this.goUp();\n            this.direction = \"u\";\n          }break;\n\n        case \"ArrowDown\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza in sus, nu pot da comanda de jos\n          if (this.direction != \"u\") {\n            this.goDowm();\n            this.direction = \"d\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowLeft\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza spre dreapta, nu pot da comanda de stanga\n          if (this.direction != \"r\") {\n            this.goLeft();\n            this.direction = \"l\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowRight\":\n          console.log(e.key);\n          //Daca sarpele se deplaseaza spre stanga nu pot da comanda de dreapta\n          if (this.direction != \"l\") {\n            this.goRight();\n            this.direction = \"r\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n      }\n    });\n  },\n\n  methods: {\n    //Metoda de desenare sarpe\n    paintSnake() {\n      //Daca pozitiile trecute nu sunt nule, le sterg\n      if (this.pastSnakePosition != null) {\n        for (var i = 0; i < this.pastSnakePosition.length; i++) {\n          this.context.clearRect(\n            this.pastSnakePosition[i].x,\n            this.pastSnakePosition[i].y,\n            20,\n            20\n          );\n          if (i < this.snakePosition.length - 1) {\n            this.snakePosition[i + 1] = this.pastSnakePosition[i];\n          }\n        }\n      }\n      //Desenez pozitiile actuale ale sarpelui\n      this.context.fillStyle = \"black;\";\n      for (var j = 0; j < this.snakePosition.length; j++) {\n        this.context.fillRect(\n          this.snakePosition[j].x,\n          this.snakePosition[j].y,\n          20,\n          20\n        );\n      }\n      this.verify();\n      this.pastSnakePosition = this.snakePosition;\n    },\n\n    //Metoda de desenat mancarea\n    paintFood(position) {\n      //Daca pozitia trecuta a mancarii nu este null, o sterg\n      if (this.pastFoodPosition != null) {\n        this.context.clearRect(\n          this.pastFoodPosition.x,\n          this.pastFoodPosition.y,\n          20,\n          20\n        );\n      }\n      //Desenez pozitia actuala a mancarii\n      this.context.fillStyle = \"red\";\n      this.context.fillRect(position.x, position.y, 20, 20);\n      this.context.fillStyle = \"black\";\n    },\n\n    //In functie de tasta apasata se apeleaza una din metodele\n    //de mai jos care emit un mesaj corespunzator catre server\n    goRight() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goRight\");\n    },\n\n    goLeft() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goLeft\");\n    },\n\n    goUp() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goUp\");\n    },\n\n    goDowm() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goDown\");\n    },\n\n    //Metoda verifica daca sarpele nu s-a muscat pe el\n    //Daca s-a muscat afiseaza un mesaj si scorul\n    verify(){\n      for (var i2 = 1; i2 < this.snakePosition.length; i2++) {\n        if ( (this.snakePosition[0].x == this.snakePosition[i2].x) && (this.snakePosition[0].y == this.snakePosition[i2].y)) {\n          alert(\"You lose! Your final score is: \" + this.score);\n          window.location = location;\n        }\n      }\n    }\n  },\n};\n</script>\n\n<style scoped>\n/* Centrarea elementelor */\n.snake {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.board {\n  margin-top: 100px;\n}\n</style>\n"]}]}