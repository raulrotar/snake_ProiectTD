{"remainingRequest":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\src\\components\\SnakeGame.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\src\\components\\SnakeGame.vue","mtime":1621892018439},{"path":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\adeli\\Desktop\\Faculta\\Semestrul2\\TD\\Proiect\\Snake\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBpbyBmcm9tICJzb2NrZXQuaW8tY2xpZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTbmFrZUdhbWUiLAogIHNuYWtlUG9zaXRpb246IFtdLAogIGZvb2RQb3NpdGlvbjoge30sCiAgcGFzdFNuYWtlUG9zaXRpb246IFtdLAogIHBhc3RGb29kUG9zaXRpb246IHt9LAogIGRpcmVjdGlvbjogInIiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb2NrZXQ6IHt9LAogICAgICBjb250ZXh0OiB7fSwKICAgICAgc2NvcmU6IDAsCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNvY2tldCA9IGlvKCJodHRwOi8vbG9jYWxob3N0OjMwMDAiKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5jb250ZXh0ID0gdGhpcy4kcmVmcy5nYW1lLmdldENvbnRleHQoIjJkIik7CiAgICB0aGlzLnNvY2tldC5vbigic25ha2VQb3NpdGlvbiIsIChkYXRhKSA9PiB7CiAgICAgIHRoaXMuc25ha2VQb3NpdGlvbiA9IGRhdGE7CiAgICAgIHRoaXMucGFpbnRTbmFrZSgpOwogICAgfSk7CgogICAgdGhpcy5zb2NrZXQub24oImZvb2RQb3NpdGlvbiIsIChkYXRhKSA9PiB7CiAgICAgIHRoaXMuZm9vZFBvc2l0aW9uID0gZGF0YTsKICAgICAgdGhpcy5wYWludEZvb2QodGhpcy5mb29kUG9zaXRpb24pOwogICAgICB0aGlzLnBhc3RGb29kUG9zaXRpb24gPSBkYXRhOwogICAgfSk7CgogICAgdGhpcy5zb2NrZXQub24oImxvc2UiLCAoKSA9PiB7CiAgICAgIGFsZXJ0KCJZb3UgbG9zZSEgWW91ciBmaW5hbCBzY29yZSBpczogIiArIHRoaXMuc2NvcmUpOwogICAgICB3aW5kb3cubG9jYXRpb24gPSBsb2NhdGlvbjsKICAgIH0pOwoKICAgIHRoaXMuc29ja2V0Lm9uKCJ1cGRhdGVTY29yZSIsICgpID0+IHsKICAgICAgdGhpcy5zY29yZSArPSAxMDsKICAgIH0pOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgKGUpID0+IHsKICAgICAgCiAgICAgIHN3aXRjaCAoZS5rZXkpIHsKICAgICAgICBjYXNlICJBcnJvd1VwIjoKICAgICAgICAgIGNvbnNvbGUubG9nKGUua2V5KTsKICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbiAhPSAiZCIpIHsKICAgICAgICAgICAgdGhpcy5nb1VwKCk7CiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gInUiOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS54LCB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLnkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93RG93biI6CiAgICAgICAgICBjb25zb2xlLmxvZyhlLmtleSk7CiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gInUiKSB7CiAgICAgICAgICAgIHRoaXMuZ29Eb3dtKCk7CiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gImQiOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS54LCB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLnkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93TGVmdCI6CiAgICAgICAgICBjb25zb2xlLmxvZyhlLmtleSk7CiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gIT0gInIiKSB7CiAgICAgICAgICAgIHRoaXMuZ29MZWZ0KCk7CiAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uID0gImwiOwogICAgICAgICAgfQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5wYXN0U25ha2VQb3NpdGlvblswXS54LCB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLnkpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkFycm93UmlnaHQiOgogICAgICAgICAgY29uc29sZS5sb2coZS5rZXkpOwogICAgICAgICAgaWYgKHRoaXMuZGlyZWN0aW9uICE9ICJsIikgewogICAgICAgICAgICB0aGlzLmdvUmlnaHQoKTsKICAgICAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSAiciI7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnBhc3RTbmFrZVBvc2l0aW9uWzBdLngsIHRoaXMucGFzdFNuYWtlUG9zaXRpb25bMF0ueSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgcGFpbnRTbmFrZSgpIHsKICAgICAgaWYgKHRoaXMucGFzdFNuYWtlUG9zaXRpb24gIT0gbnVsbCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYXN0U25ha2VQb3NpdGlvbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCgKICAgICAgICAgICAgdGhpcy5wYXN0U25ha2VQb3NpdGlvbltpXS54LAogICAgICAgICAgICB0aGlzLnBhc3RTbmFrZVBvc2l0aW9uW2ldLnksCiAgICAgICAgICAgIDIwLAogICAgICAgICAgICAyMAogICAgICAgICAgKTsKICAgICAgICAgIGlmIChpIDwgdGhpcy5zbmFrZVBvc2l0aW9uLmxlbmd0aCAtIDEpIHsKICAgICAgICAgICAgdGhpcy5zbmFrZVBvc2l0aW9uW2kgKyAxXSA9IHRoaXMucGFzdFNuYWtlUG9zaXRpb25baV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrOyI7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5zbmFrZVBvc2l0aW9uLmxlbmd0aDsgaisrKSB7CiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KAogICAgICAgICAgdGhpcy5zbmFrZVBvc2l0aW9uW2pdLngsCiAgICAgICAgICB0aGlzLnNuYWtlUG9zaXRpb25bal0ueSwKICAgICAgICAgIDIwLAogICAgICAgICAgMjAKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMudmVyaWZ5KCk7CiAgICAgIHRoaXMucGFzdFNuYWtlUG9zaXRpb24gPSB0aGlzLnNuYWtlUG9zaXRpb247CiAgICB9LAoKICAgIHBhaW50Rm9vZChwb3NpdGlvbikgewogICAgICBpZiAodGhpcy5wYXN0Rm9vZFBvc2l0aW9uICE9IG51bGwpIHsKICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KAogICAgICAgICAgdGhpcy5wYXN0Rm9vZFBvc2l0aW9uLngsCiAgICAgICAgICB0aGlzLnBhc3RGb29kUG9zaXRpb24ueSwKICAgICAgICAgIDIwLAogICAgICAgICAgMjAKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAicmVkIjsKICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIDIwLCAyMCk7CiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAiYmxhY2siOwogICAgfSwKCiAgICBnb1JpZ2h0KCkgewogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrIjsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiZ29SaWdodCIpOwogICAgfSwKCiAgICBnb0xlZnQoKSB7CiAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSAiYmxhY2siOwogICAgICB0aGlzLnNvY2tldC5lbWl0KCJnb0xlZnQiKTsKICAgIH0sCgogICAgZ29VcCgpIHsKICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9ICJibGFjayI7CiAgICAgIHRoaXMuc29ja2V0LmVtaXQoImdvVXAiKTsKICAgIH0sCgogICAgZ29Eb3dtKCkgewogICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gImJsYWNrIjsKICAgICAgdGhpcy5zb2NrZXQuZW1pdCgiZ29Eb3duIik7CiAgICB9LAoKICAgIHZlcmlmeSgpewogICAgICBmb3IgKHZhciBpMiA9IDE7IGkyIDwgdGhpcy5zbmFrZVBvc2l0aW9uLmxlbmd0aDsgaTIrKykgewogICAgICAgIGlmICggKHRoaXMuc25ha2VQb3NpdGlvblswXS54ID09IHRoaXMuc25ha2VQb3NpdGlvbltpMl0ueCkgJiYgKHRoaXMuc25ha2VQb3NpdGlvblswXS55ID09IHRoaXMuc25ha2VQb3NpdGlvbltpMl0ueSkpIHsKICAgICAgICAgIGFsZXJ0KCJZb3UgbG9zZSEgWW91ciBmaW5hbCBzY29yZSBpczogIiArIHRoaXMuc2NvcmUpOwogICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gbG9jYXRpb247CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["SnakeGame.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SnakeGame.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"snake\">\n    <h1>Snake Game</h1>\n    <h2>Score: {{ score }}</h2>\n    <canvas\n      ref=\"game\"\n      class=\"board\"\n      width=\"640\"\n      height=\"480\"\n      style=\"border: 1px solid black\"\n    >\n    </canvas>\n  </div>\n</template>\n\n<script>\nimport io from \"socket.io-client\";\nexport default {\n  name: \"SnakeGame\",\n  snakePosition: [],\n  foodPosition: {},\n  pastSnakePosition: [],\n  pastFoodPosition: {},\n  direction: \"r\",\n  data() {\n    return {\n      socket: {},\n      context: {},\n      score: 0,\n    };\n  },\n\n  created() {\n    this.socket = io(\"http://localhost:3000\");\n  },\n\n  mounted() {\n    this.context = this.$refs.game.getContext(\"2d\");\n    this.socket.on(\"snakePosition\", (data) => {\n      this.snakePosition = data;\n      this.paintSnake();\n    });\n\n    this.socket.on(\"foodPosition\", (data) => {\n      this.foodPosition = data;\n      this.paintFood(this.foodPosition);\n      this.pastFoodPosition = data;\n    });\n\n    this.socket.on(\"lose\", () => {\n      alert(\"You lose! Your final score is: \" + this.score);\n      window.location = location;\n    });\n\n    this.socket.on(\"updateScore\", () => {\n      this.score += 10;\n    });\n\n    window.addEventListener(\"keydown\", (e) => {\n      \n      switch (e.key) {\n        case \"ArrowUp\":\n          console.log(e.key);\n          if (this.direction != \"d\") {\n            this.goUp();\n            this.direction = \"u\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowDown\":\n          console.log(e.key);\n          if (this.direction != \"u\") {\n            this.goDowm();\n            this.direction = \"d\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowLeft\":\n          console.log(e.key);\n          if (this.direction != \"r\") {\n            this.goLeft();\n            this.direction = \"l\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n\n        case \"ArrowRight\":\n          console.log(e.key);\n          if (this.direction != \"l\") {\n            this.goRight();\n            this.direction = \"r\";\n          }\n          console.log(this.pastSnakePosition[0].x, this.pastSnakePosition[0].y);\n          break;\n      }\n    });\n  },\n\n  methods: {\n    paintSnake() {\n      if (this.pastSnakePosition != null) {\n        for (var i = 0; i < this.pastSnakePosition.length; i++) {\n          this.context.clearRect(\n            this.pastSnakePosition[i].x,\n            this.pastSnakePosition[i].y,\n            20,\n            20\n          );\n          if (i < this.snakePosition.length - 1) {\n            this.snakePosition[i + 1] = this.pastSnakePosition[i];\n          }\n        }\n      }\n\n      this.context.fillStyle = \"black;\";\n      for (var j = 0; j < this.snakePosition.length; j++) {\n        this.context.fillRect(\n          this.snakePosition[j].x,\n          this.snakePosition[j].y,\n          20,\n          20\n        );\n      }\n      this.verify();\n      this.pastSnakePosition = this.snakePosition;\n    },\n\n    paintFood(position) {\n      if (this.pastFoodPosition != null) {\n        this.context.clearRect(\n          this.pastFoodPosition.x,\n          this.pastFoodPosition.y,\n          20,\n          20\n        );\n      }\n      this.context.fillStyle = \"red\";\n      this.context.fillRect(position.x, position.y, 20, 20);\n      this.context.fillStyle = \"black\";\n    },\n\n    goRight() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goRight\");\n    },\n\n    goLeft() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goLeft\");\n    },\n\n    goUp() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goUp\");\n    },\n\n    goDowm() {\n      this.context.fillStyle = \"black\";\n      this.socket.emit(\"goDown\");\n    },\n\n    verify(){\n      for (var i2 = 1; i2 < this.snakePosition.length; i2++) {\n        if ( (this.snakePosition[0].x == this.snakePosition[i2].x) && (this.snakePosition[0].y == this.snakePosition[i2].y)) {\n          alert(\"You lose! Your final score is: \" + this.score);\n          window.location = location;\n        }\n      }\n    }\n  },\n};\n</script>\n\n<style scoped>\n.snake {\n  margin: 0;\n  padding: 0;\n  text-align: center;\n}\n\n.board {\n  margin-top: 100px;\n}\n</style>\n"]}]}